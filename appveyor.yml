# This file is automatically generated by .appveyor/merge_matrices.ps1
# which is executed by Git pre-commit hooks (See .appveyor/hooks).
#
# DO NOT EDIT THIS FILE MANUALLY - your changes will be lost!
# To modify the build matrix, edit the matrix.yml files in .appveyor/ subdirectories.

version: 1.0.{build}

environment:
  matrix:
  # WARNING: never change the indentation of the lines below - it matters for YAML parsing!
  - COMPILER: mingw
    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2019
    GENERATOR: "MinGW Makefiles"
    MINGW_PATH: "C:\\MinGW\\bin"

  - COMPILER: mingw
    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2019
    GENERATOR: "MinGW Makefiles"
    MINGW_PATH: "C:\\mingw-w64\\i686-7.3.0-posix-dwarf-rt_v5-rev0\\mingw32\\bin"

  - COMPILER: mingw
    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2019
    GENERATOR: "MinGW Makefiles"
    MINGW_PATH: "C:\\mingw-w64\\x86_64-7.3.0-posix-seh-rt_v5-rev0\\mingw64\\bin"

  - COMPILER: mingw
    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2019
    GENERATOR: "MinGW Makefiles"
    MINGW_PATH: "C:\\mingw-w64\\i686-8.1.0-posix-dwarf-rt_v6-rev0\\mingw32\\bin"

  - COMPILER: mingw
    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2019
    GENERATOR: "MinGW Makefiles"
    MINGW_PATH: "C:\\mingw-w64\\x86_64-8.1.0-posix-seh-rt_v6-rev0\\mingw64\\bin"
  # WARNING: never change the indentation of the lines below - it matters for YAML parsing!
  - COMPILER: msvc
    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2015
    GENERATOR: "Visual Studio 14 2015"

  - COMPILER: msvc
    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2017
    GENERATOR: "Visual Studio 15 2017"

  - COMPILER: msvc
    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2019
    GENERATOR: "Visual Studio 16 2019"

  - COMPILER: msvc
    APPVEYOR_BUILD_WORKER_IMAGE: Visual Studio 2022
    GENERATOR: "Visual Studio 17 2022"

build_script:
  - ps: |
      # Dispatch to compiler-specific script if present
       = ".appveyor//build.ps1"
      if (Test-Path ) {
          & 
      } else {
          # fallback generic build
          cmake -S . -B build -G ""
          cmake --build build --config Release
          Push-Location build
          ctest -C Release --output-on-failure --timeout 60
          Pop-Location
      }
