#ifndef PM_STD_COMPAT_LAYER_FILESYSTEM
#define PM_STD_COMPAT_LAYER_FILESYSTEM

#include <std-compat/crt_patches.h>

#include "std-compat/internal/filesystem.hpp"

namespace std
{
namespace filesystem
{
    class path : public ghc::filesystem::path
    {
        using base = ghc::filesystem::path;

    public:
        using base::base;      // inherit constructors
        using base::operator=; // inherit assignment operators

        // using base::append;
        template <class InputIterator>
        inline std::filesystem::path &append(InputIterator first, InputIterator last)
        {
            return base::append(first, last);
        }

        // using base::compare;
        // using base::concat;
        template <class Source>
        inline std::filesystem::path &concat(const Source &x)
        {
            return static_cast<std::filesystem::path &>(base::concat(x));
        }
        template <class InputIterator>
        inline std::filesystem::path &concat(InputIterator first, InputIterator last)
        {
            return base::concat(first, last);
        }

        // using base::empty;
        // using base::extension;
        // using base::filename;
        // using base::generic_string;
        // using base::has_extension;
        // using base::has_filename;
        // using base::has_parent_path;
        // using base::has_relative_path;
        // using base::is_absolute;
        // using base::is_relative;
        // using base::lexically_normal;
        // using base::lexically_proximate;
        // using base::lexically_relative;
        // using base::make_preferred;
        // using base::parent_path;
        // using base::relative_path;
        // using base::remove_filename;
        // using base::replace_extension;
        // using base::root_directory;
        // using base::root_name;
        // using base::root_path;
        // using base::stem;
        // using base::string;
        // using base::u16string;
        // using base::u32string;
        // using base::u8string;
        // using base::wstring;

        // // Iterators
        // using base::begin;
        // using base::end;

        // // Operators (these bring in template operator overloads too)
        // using base::operator/=;
        // using base::operator+=;
    };

    // ---- Type aliases ----
    using ghc::filesystem::directory_entry;
    using ghc::filesystem::directory_iterator;
    using ghc::filesystem::file_status;
    using ghc::filesystem::filesystem_error;
    using ghc::filesystem::recursive_directory_iterator;
    using ghc::filesystem::space_info;

    using ghc::filesystem::copy_options;
    using ghc::filesystem::directory_options;
    using ghc::filesystem::file_type;
    using ghc::filesystem::perm_options;
    using ghc::filesystem::perms;

    using ghc::filesystem::file_time_type;

    // ---- Function aliases ----
    using ghc::filesystem::absolute;
    using ghc::filesystem::canonical;
    using ghc::filesystem::copy;
    using ghc::filesystem::copy_file;
    using ghc::filesystem::copy_symlink;
    using ghc::filesystem::create_directories;
    using ghc::filesystem::create_directory;
    using ghc::filesystem::create_directory_symlink;
    using ghc::filesystem::create_hard_link;
    using ghc::filesystem::create_symlink;
    using ghc::filesystem::current_path;
    using ghc::filesystem::equivalent;
    using ghc::filesystem::exists;
    using ghc::filesystem::file_size;
    using ghc::filesystem::hard_link_count;
    using ghc::filesystem::last_write_time;
    using ghc::filesystem::permissions;
    using ghc::filesystem::proximate;
    using ghc::filesystem::read_symlink;
    using ghc::filesystem::relative;
    using ghc::filesystem::remove;
    using ghc::filesystem::remove_all;
    using ghc::filesystem::rename;
    using ghc::filesystem::resize_file;
    using ghc::filesystem::space;
    using ghc::filesystem::status;
    using ghc::filesystem::symlink_status;
    using ghc::filesystem::temp_directory_path;
    using ghc::filesystem::weakly_canonical;

    // ---- File type predicates ----
    using ghc::filesystem::is_block_file;
    using ghc::filesystem::is_character_file;
    using ghc::filesystem::is_directory;
    using ghc::filesystem::is_empty;
    using ghc::filesystem::is_fifo;
    using ghc::filesystem::is_other;
    using ghc::filesystem::is_regular_file;
    using ghc::filesystem::is_socket;
    using ghc::filesystem::is_symlink;
    using ghc::filesystem::status_known;
} // namespace filesystem
} // namespace std

#endif
